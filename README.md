# Bands Nearby

At a glance decide if you want go to a show and buy tickets with a click. Bands Nearby is a frictionless interface to explore music.

Uses vanilla JS and JSDOM to scrape concert listings from local venues often too small or underground to be included in mainstream listings. Built with es6, Node.js, Bluebird, Flexbox, and React.

Bands Nearby Beta is available on web and mobile: http://beta.bandsnearby.com/

Bands Nearby:
![alt text](https://github.com/jenjwong/bands-nearby/blob/beta/src/css/images/venuePic.png "Bands Nearby")


## Getting Started

Clone the repository and run npm install to get a copy of the project up and running on your local machine for development and testing purposes. Testing and development builds are automated by running npm run start and npm run test. See deployment for notes on how to deploy the project on a live system.

### Prerequisites

Node.js

NPM

### Installing

Get a development environment running by installing npm dependencies and running chronjob.js to seed your data. Run tests with npm run test.

Bands Nearby generates a custom data-set of concerts using Node.js web scrapers. Web scrapers return an array of objects which are then extendend using third party APIs. Bands Nearby uses the YouTube API to get videos and LastFM API to get artist summaries, and similar artists.

Create a file called APIKeys.js in server/workers and add keys from [YouTube](https://developers.google.com/youtube/v3/getting-started) and [LastFM](https://secure.last.fm/login?next=/api/account/create).

```
create APIKeys.js file in server/workers:

exports.YOUTUBE = 'AIzTEkZEmtfLs7X_4MBvT8rH9E';
exports.LASTFM = '2f2f02f1195f2b3514f9e43';
```


The node scraping task is designed so additional venues can be added easily. See bayBridged.sf for an example scraper. To add new venues, write a web scraper that returns an array of objects with the following properties:

```
Initial object generated by web scraper:


const show = {};
show.venue = venue; // string
show.title = title; // array of strings
show.headliner = headliner; // string
show.date = date;  // string
show.startTime = startTime;  // string
show.cost = cost;  // number
show.artistSummary = artistSummary; // string
show.photo = photo; // string
show.link = link;  // string
 ```


In chronjob.js add the new venue object to the venues array.
```
  const venues = [{ name: 'venueName', http: 'http://example.com', scraper: yourScraper }]
 ```

Bands Nearby uses [Bluebird](http://bluebirdjs.com/docs/getting-started.html) promises to handle asynchronous code. We used the Bluebird library instead of native es6 promises because of helpful methods like asynch map and reduce and the ability to import and promisify entire libraries.


The Beta version of Bands Nearby stores data in a json file using node-fs automation. Running node server/workers/chronjob.js will create a bandsNearbyData.json file if one doesn't exist, take the old bandsNearbyData.json file and archive it and  replace it with a file containing newly generated data.

From the root directory run:

```
node server/workers/chronjob.js
```

## License

This application is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details
